<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case Sim</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üéÆ Case Sim</h1>
            <div class="user-panel">
                <span id="user-email">–ì–æ—Å—Ç—å</span>
                <button id="auth-btn" onclick="showAuth()">üîë –í–æ–π—Ç–∏</button>
                <button id="logout-btn" onclick="logout()" style="display:none">üö™ –í—ã–π—Ç–∏</button>
                <button id="admin-btn" onclick="adminPanel()" style="display:none">‚öôÔ∏è</button>
            </div>
        </header>

        <div class="stats">
            <div>üí∞ <span id="balance">0</span></div>
            <div>üéí <span id="inventory">0</span></div>
            <button onclick="showWithdraw()" class="withdraw-btn">üí∏ –í—ã–≤–µ—Å—Ç–∏</button>
        </div>

        <h2>–ö–µ–π—Å—ã</h2>
        <div id="cases" class="grid"></div>
        
        <h2>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
        <div id="inventory-list" class="grid"></div>

        <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
        <div id="auth-modal" class="modal">
            <div class="modal-content">
                <h3>–í—Ö–æ–¥/–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
                <input id="email" placeholder="Email">
                <input id="password" type="password" placeholder="–ü–∞—Ä–æ–ª—å">
                <button onclick="login()">–í–æ–π—Ç–∏</button>
                <button onclick="register()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                <button onclick="closeModal('auth-modal')">–û—Ç–º–µ–Ω–∞</button>
                <p id="auth-error"></p>
            </div>
        </div>

        <div id="preview-modal" class="modal">
            <div class="modal-content">
                <h3 id="preview-title"></h3>
                <p id="preview-price"></p>
                <div id="preview-items"></div>
                <button onclick="openCase()" id="open-btn">–û—Ç–∫—Ä—ã—Ç—å</button>
                <button onclick="closeModal('preview-modal')">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>

        <div id="withdraw-modal" class="modal">
            <div class="modal-content">
                <h3>–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</h3>
                <p>–ë–∞–ª–∞–Ω—Å: <span id="withdraw-balance">0</span></p>
                <input id="withdraw-amount" type="number" min="1000" placeholder="–°—É–º–º–∞ (–º–∏–Ω 1000)">
                <input id="withdraw-tg" placeholder="@telegram">
                <button onclick="createWithdraw()">–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É</button>
                <button onclick="closeModal('withdraw-modal')">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>

       <div id="admin-modal" class="modal">
    <div class="modal-content" style="max-width: 900px;">
        <h3>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h3>
        
        <div class="admin-row">
            <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –∫–µ–π—Å—ã –∏ —Å–∫–∏–Ω—ã -->
            <div class="admin-section">
                <h4>–ö–µ–π—Å—ã</h4>
                <div id="admin-cases-list"></div>
                
                <h4 style="margin-top: 20px;">–°–æ–∑–¥–∞—Ç—å –∫–µ–π—Å</h4>
                <input id="new-case-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–µ–π—Å–∞">
                <input id="new-case-price" type="number" placeholder="–¶–µ–Ω–∞" style="margin: 5px 0;">
                <button onclick="createNewCase()" style="width:100%">–°–æ–∑–¥–∞—Ç—å –∫–µ–π—Å</button>
                
                <h4 style="margin-top: 20px;">–í—Å–µ —Å–∫–∏–Ω—ã</h4>
                <div id="admin-skins-list"></div>
                
                <h4 style="margin-top: 20px;">–°–æ–∑–¥–∞—Ç—å —Å–∫–∏–Ω</h4>
                <input id="new-skin-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Å–∫–∏–Ω–∞">
                <input id="new-skin-price" type="number" placeholder="–¶–µ–Ω–∞" value="100" style="margin: 5px 0;">
                <button onclick="createNewSkin()" style="width:100%">–°–æ–∑–¥–∞—Ç—å —Å–∫–∏–Ω</button>
            </div>
            
            <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–µ–π—Å–∞ -->
            <div class="admin-section">
                <h4>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–µ–π—Å–∞</h4>
                <div id="selected-case-info" style="background:rgba(76,201,240,0.1);padding:10px;border-radius:8px;">
                    –í—ã–±–µ—Ä–∏—Ç–µ –∫–µ–π—Å —Å–ª–µ–≤–∞
                </div>
                
                <div style="margin: 15px 0;">
                    <strong>–°–∫–∏–Ω—ã –≤ –∫–µ–π—Å–µ (—à–∞–Ω—Å –≤—ã–ø–∞–¥–µ–Ω–∏—è 1-100):</strong>
                </div>
                
                <div id="case-drop-zone" 
                     ondrop="dropOnCase(event)" 
                     ondragover="allowDrop(event)"
                     ondragleave="dragLeave(event)">
                    <div id="case-skins-list">
                        –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å—é–¥–∞ —Å–∫–∏–Ω—ã –∏–∑ –ª–µ–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏
                    </div>
                </div>
                
                <button onclick="saveCaseSkins()" style="width:100%;margin-top:15px;background:#00b894;">
                    üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–∞–≤ –∫–µ–π—Å–∞
                </button>
                
                <p style="font-size:0.8em; opacity:0.7; margin-top:10px;">
                    üí° –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–∫–∏–Ω—ã –≤ –∑–æ–Ω—É –≤—ã—à–µ. –®–∞–Ω—Å —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏ (1-100). 
                    –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —à–∞–Ω—Å –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞ —Ä—è–¥–æ–º —Å –∫–∞–∂–¥—ã–º —Å–∫–∏–Ω–æ–º.
                </p>
            </div>
        </div>
        
        <button onclick="closeModal('admin-modal')" style="margin-top:20px;">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
</div>
</div>
    </div>

    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="script.js"></script>
</body>
</html>