<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case Sim</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üéÆ Case Sim</h1>
            <div class="user-panel">
                <span id="user-email">–ì–æ—Å—Ç—å</span>
                <button id="auth-btn" onclick="showAuth()">üîë –í–æ–π—Ç–∏</button>
                <button id="logout-btn" onclick="logout()" style="display:none">üö™ –í—ã–π—Ç–∏</button>
                <button id="admin-btn" onclick="adminPanel()" style="display:none">‚öôÔ∏è</button>
            </div>
        </header>

        <div class="stats">
            <div>üí∞ <span id="balance">0</span></div>
            <div>üéí <span id="inventory">0</span></div>
            <button onclick="showWithdraw()" class="withdraw-btn">üí∏ –í—ã–≤–µ—Å—Ç–∏</button>
        </div>

        <h2>–ö–µ–π—Å—ã</h2>
        <div id="cases" class="grid"></div>
        
        <h2>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
        <div id="inventory-list" class="grid"></div>

        <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
        <div id="auth-modal" class="modal">
            <div class="modal-content">
                <h3>–í—Ö–æ–¥/–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
                <input id="email" placeholder="Email">
                <input id="password" type="password" placeholder="–ü–∞—Ä–æ–ª—å">
                <button onclick="login()">–í–æ–π—Ç–∏</button>
                <button onclick="register()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                <button onclick="closeModal('auth-modal')">–û—Ç–º–µ–Ω–∞</button>
                <p id="auth-error"></p>
            </div>
        </div>

        <div id="preview-modal" class="modal">
            <div class="modal-content">
                <h3 id="preview-title"></h3>
                <p id="preview-price"></p>
                <div id="preview-items"></div>
                <button onclick="openCase()" id="open-btn">–û—Ç–∫—Ä—ã—Ç—å</button>
                <button onclick="closeModal('preview-modal')">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>

        <div id="withdraw-modal" class="modal">
            <div class="modal-content">
                <h3>–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</h3>
                <p>–ë–∞–ª–∞–Ω—Å: <span id="withdraw-balance">0</span></p>
                <input id="withdraw-amount" type="number" min="1000" placeholder="–°—É–º–º–∞ (–º–∏–Ω 1000)">
                <input id="withdraw-tg" placeholder="@telegram">
                <button onclick="createWithdraw()">–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É</button>
                <button onclick="closeModal('withdraw-modal')">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>

        <div id="admin-modal" class="modal">
    <div class="modal-content" style="max-width: 900px;">
        <h3>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h3>
        
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <div style="margin-bottom: 20px; border-bottom: 1px solid #4cc9f0; padding-bottom: 10px;">
            <button onclick="showAdminTab('withdraw')" class="tab-btn">–í—ã–≤–æ–¥</button>
            <button onclick="showAdminTab('cases')" class="tab-btn">–ö–µ–π—Å—ã</button>
            <button onclick="showAdminTab('skins')" class="tab-btn">–°–∫–∏–Ω—ã</button>
        </div>
        
        <!-- –í–∫–ª–∞–¥–∫–∞ –≤—ã–≤–æ–¥ -->
        <div id="admin-withdraw" class="admin-tab">
            <h4>–ó–∞—è–≤–∫–∏ –Ω–∞ –≤—ã–≤–æ–¥</h4>
            <div id="withdraw-list"></div>
        </div>
        
        <!-- –í–∫–ª–∞–¥–∫–∞ –∫–µ–π—Å—ã -->
        <div id="admin-cases" class="admin-tab" style="display:none;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <!-- –°–ø–∏—Å–æ–∫ –∫–µ–π—Å–æ–≤ -->
                <div>
                    <h4>–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–µ–π—Å—ã</h4>
                    <div id="cases-list-admin" class="drag-container"></div>
                    
                    <h4 style="margin-top: 20px;">–ù–æ–≤—ã–π –∫–µ–π—Å</h4>
                    <input id="case-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–µ–π—Å–∞">
                    <input id="case-price" type="number" placeholder="–¶–µ–Ω–∞">
                    <input id="case-emoji" placeholder="–≠–º–æ–¥–∑–∏ (üì¶)">
                    <button onclick="createNewCase()" style="width: 100%; margin-top: 10px;">–°–æ–∑–¥–∞—Ç—å –∫–µ–π—Å</button>
                </div>
                
                <!-- Drag & Drop –∑–æ–Ω–∞ –¥–ª—è –∫–µ–π—Å–∞ -->
                <div>
                    <h4>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–µ–π—Å–∞</h4>
                    <div id="selected-case-info" style="background: rgba(76,201,240,0.1); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                        <p>–í—ã–±–µ—Ä–∏—Ç–µ –∫–µ–π—Å —Å–ª–µ–≤–∞</p>
                    </div>
                    
                    <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; min-height: 300px;"
                         id="case-drop-zone"
                         ondrop="dropOnCase(event)"
                         ondragover="allowDrop(event)">
                        <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–∫–∏–Ω—ã —Å—é–¥–∞</p>
                        <div id="case-skins-list"></div>
                    </div>
                    <button onclick="saveCaseSkins()" id="save-case-btn" style="display:none; width: 100%; margin-top: 10px;">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–∞–≤ –∫–µ–π—Å–∞</button>
                </div>
            </div>
        </div>
        
        <!-- –í–∫–ª–∞–¥–∫–∞ —Å–∫–∏–Ω—ã -->
        <div id="admin-skins" class="admin-tab" style="display:none;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <!-- –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫–∏–Ω–∞ -->
                <div>
                    <h4>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–∫–∏–Ω</h4>
                    <input id="skin-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Å–∫–∏–Ω–∞">
                    <input id="skin-price" type="number" placeholder="–¶–µ–Ω–∞" value="100">
                    <select id="skin-rarity" style="width: 100%; padding: 10px; margin: 10px 0; background: rgba(255,255,255,0.1); color: white; border: 1px solid #4cc9f0; border-radius: 5px;">
                        <option value="common">–û–±—ã—á–Ω—ã–π</option>
                        <option value="rare">–†–µ–¥–∫–∏–π</option>
                        <option value="epic">–≠–ø–∏—á–µ—Å–∫–∏–π</option>
                        <option value="legendary">–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π</option>
                    </select>
                    <input id="skin-emoji" placeholder="–≠–º–æ–¥–∑–∏ (üéÆ)" value="üéÆ">
                    <input id="skin-image" placeholder="URL –∫–∞—Ä—Ç–∏–Ω–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)">
                    <button onclick="createNewSkin()" style="width: 100%; margin-top: 10px;">–°–æ–∑–¥–∞—Ç—å —Å–∫–∏–Ω</button>
                </div>
                
                <!-- –°–ø–∏—Å–æ–∫ —Å–∫–∏–Ω–æ–≤ -->
                <div>
                    <h4>–í—Å–µ —Å–∫–∏–Ω—ã</h4>
                    <div id="skins-list-admin" class="drag-container"></div>
                    <p style="font-size: 0.9em; opacity: 0.7; margin-top: 10px;">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–∫–∏–Ω –≤ –∑–æ–Ω—É –∫–µ–π—Å–∞</p>
                </div>
            </div>
        </div>
        
        <button onclick="closeModal('admin-modal')" style="margin-top: 20px;">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
</div>
    </div>

    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="script.js"></script>
</body>
</html>