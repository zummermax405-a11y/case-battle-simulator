<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ Case Simulator</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header class="main-header">
            <div class="header-left">
                <div class="logo"><i class="fas fa-gamepad"></i><h1>Case Simulator</h1></div>
            </div>
            <div class="user-panel">
                <div class="user-info">
                    <div class="user-balance"><i class="fas fa-coins"></i><span id="balance">0</span> ‚ÇΩ</div>
                    <div class="user-inventory"><i class="fas fa-tshirt"></i><span id="inventory-count">0</span></div>
                    <div class="user-email" id="user-email">–ì–æ—Å—Ç—å</div>
                </div>
                <div class="auth-buttons">
                    <button id="auth-btn" class="btn-primary" onclick="showAuth()"><i class="fas fa-sign-in-alt"></i> –í–æ–π—Ç–∏</button>
                    <button id="logout-btn" class="btn-secondary" onclick="logout()" style="display:none"><i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏</button>
                    <button id="admin-btn" class="btn-admin" onclick="adminPanel()" style="display:none"><i class="fas fa-cog"></i> –ê–¥–º–∏–Ω</button>
                </div>
            </div>
        </header>

        <nav class="main-nav">
            <button class="nav-btn active" onclick="showSection('cases-section')"><i class="fas fa-box-open"></i> –ö–µ–π—Å—ã</button>
            <button class="nav-btn" onclick="showSection('inventory-section')"><i class="fas fa-backpack"></i> –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</button>
            <button class="nav-btn" onclick="showSection('withdrawals-section')"><i class="fas fa-money-bill-wave"></i> –ó–∞—è–≤–∫–∏</button>
        </nav>

        <section id="cases-section" class="main-section active">
            <div class="section-header"><h2><i class="fas fa-box-open"></i> –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–µ–π—Å—ã</h2><p>–û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ –∫–µ–π—Å—ã –∏ –ø–æ–ª—É—á–∞–π—Ç–µ —Ä–µ–¥–∫–∏–µ —Å–∫–∏–Ω—ã!</p></div>
            <div id="cases" class="cases-grid"><div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∫–µ–π—Å–æ–≤...</div></div>
        </section>

        <section id="inventory-section" class="main-section">
            <div class="section-header">
                <h2><i class="fas fa-backpack"></i> –í–∞—à –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
                <div class="inventory-stats"><span><span id="inventory-total">0</span> –ø—Ä–µ–¥–º–µ—Ç–æ–≤</span><span>–°—Ç–æ–∏–º–æ—Å—Ç—å: <span id="inventory-value">0</span> ‚ÇΩ</span></div>
            </div>
            <div id="inventory-list" class="inventory-grid"><div class="empty-state"><i class="fas fa-box-open"></i><p>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç</p></div></div>
            <div class="inventory-actions"><button class="btn-primary" onclick="showWithdraw()"><i class="fas fa-money-bill-wave"></i> –í—ã–≤–µ—Å—Ç–∏</button></div>
        </section>

        <section id="withdrawals-section" class="main-section">
            <div class="section-header"><h2><i class="fas fa-money-bill-wave"></i> –ó–∞—è–≤–∫–∏ –Ω–∞ –≤—ã–≤–æ–¥</h2><button class="btn-primary" onclick="showWithdraw()"><i class="fas fa-plus-circle"></i> –ù–æ–≤–∞—è</button></div>
            <div class="withdrawals-container">
                <div class="withdrawals-stats">
                    <div class="stat-card"><div class="stat-icon" style="background:#4cd96420;color:#4cd964"><i class="fas fa-clock"></i></div><div class="stat-info"><span class="stat-value" id="pending-withdrawals">0</span><span class="stat-label">–û–∂–∏–¥–∞—é—Ç</span></div></div>
                    <div class="stat-card"><div class="stat-icon" style="background:#007aff20;color:#007aff"><i class="fas fa-check-circle"></i></div><div class="stat-info"><span class="stat-value" id="completed-withdrawals">0</span><span class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω—ã</span></div></div>
                    <div class="stat-card"><div class="stat-icon" style="background:#ff950020;color:#ff9500"><i class="fas fa-coins"></i></div><div class="stat-info"><span class="stat-value" id="total-withdrawn">0</span><span class="stat-label">–í—ã–≤–µ–¥–µ–Ω–æ</span></div></div>
                </div>
                <div class="withdrawals-list"><h3><i class="fas fa-history"></i> –ò—Å—Ç–æ—Ä–∏—è</h3><div id="withdrawals-history" class="withdrawals-history"><div class="empty-state"><i class="fas fa-file-invoice-dollar"></i><p>–ù–µ—Ç –∑–∞—è–≤–æ–∫</p><button class="btn-primary" onclick="showWithdraw()">–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É</button></div></div></div>
            </div>
        </section>

        <div id="auth-modal" class="modal"><div class="modal-content"><div class="modal-header"><h3><i class="fas fa-user-circle"></i> –í—Ö–æ–¥ / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3><button class="close-btn" onclick="closeModal('auth-modal')">&times;</button></div><div class="modal-body">
            <div class="form-group"><label for="email"><i class="fas fa-envelope"></i> Email</label><input id="email" type="email" placeholder="your@email.com"></div>
            <div class="form-group"><label for="password"><i class="fas fa-lock"></i> –ü–∞—Ä–æ–ª—å</label><input id="password" type="password" placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤"></div>
            <div class="form-actions"><button class="btn-primary btn-block" onclick="login()"><i class="fas fa-sign-in-alt"></i> –í–æ–π—Ç–∏</button><button class="btn-secondary btn-block" onclick="register()"><i class="fas fa-user-plus"></i> –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button></div>
            <p id="auth-error" class="error-message"></p>
        </div></div></div>

        <div id="preview-modal" class="modal"><div class="modal-content"><div class="modal-header"><h3><i class="fas fa-box-open"></i> <span id="preview-title"></span></h3><button class="close-btn" onclick="closeModal('preview-modal')">&times;</button></div><div class="modal-body">
            <div class="case-preview"><div class="case-price"><i class="fas fa-tag"></i> –°—Ç–æ–∏–º–æ—Å—Ç—å: <span id="preview-price"></span> ‚ÇΩ</div><div class="case-items"><h4><i class="fas fa-gift"></i> –í–æ–∑–º–æ–∂–Ω—ã–µ –≤—ã–∏–≥—Ä—ã—à–∏:</h4><div id="preview-items" class="preview-items-grid"></div></div></div>
            <div class="modal-actions"><button class="btn-primary btn-large" onclick="openCase()" id="open-btn"><i class="fas fa-unlock"></i> –û—Ç–∫—Ä—ã—Ç—å</button><button class="btn-secondary" onclick="closeModal('preview-modal')"><i class="fas fa-times"></i> –û—Ç–º–µ–Ω–∞</button></div>
        </div></div></div>

        <div id="withdraw-modal" class="modal"><div class="modal-content"><div class="modal-header"><h3><i class="fas fa-money-bill-wave"></i> –í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</h3><button class="close-btn" onclick="closeModal('withdraw-modal')">&times;</button></div><div class="modal-body">
            <div class="balance-info"><div class="balance-card"><i class="fas fa-wallet"></i><div><span class="balance-label">–î–æ—Å—Ç—É–ø–Ω–æ</span><span class="balance-amount"><span id="withdraw-balance">0</span> ‚ÇΩ</span></div></div></div>
            <div class="form-group"><label for="withdraw-amount"><i class="fas fa-ruble-sign"></i> –°—É–º–º–∞</label><input id="withdraw-amount" type="number" min="1000" placeholder="–û—Ç 1000 —Ä—É–±"><small>–ú–∏–Ω–∏–º—É–º: 1 000 ‚ÇΩ</small></div>
            <div class="form-group"><label for="withdraw-tg"><i class="fab fa-telegram"></i> Telegram</label><input id="withdraw-tg" placeholder="@username"><small>–î–ª—è —Å–≤—è–∑–∏</small></div>
            <div class="modal-actions"><button class="btn-primary btn-block" onclick="createWithdraw()"><i class="fas fa-paper-plane"></i> –°–æ–∑–¥–∞—Ç—å</button><button class="btn-secondary btn-block" onclick="closeModal('withdraw-modal')"><i class="fas fa-times"></i> –û—Ç–º–µ–Ω–∞</button></div>
        </div></div></div>

        <div id="admin-modal" class="modal wide-modal"><div class="modal-content"><div class="modal-header"><h3><i class="fas fa-cogs"></i> –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h3><button class="close-btn" onclick="closeModal('admin-modal')">&times;</button></div><div class="modal-body">
            <div class="admin-container">
                <div class="admin-column"><div class="admin-section"><h4><i class="fas fa-box-open"></i> –ö–µ–π—Å—ã</h4><div id="admin-cases-list" class="admin-list"><div class="empty-state small"><i class="fas fa-box-open"></i><p>–ù–µ—Ç –∫–µ–π—Å–æ–≤</p></div></div>
                    <div class="admin-form"><h5><i class="fas fa-plus-circle"></i> –ù–æ–≤—ã–π –∫–µ–π—Å</h5><input id="new-case-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" class="form-input"><input id="new-case-price" type="number" placeholder="–¶–µ–Ω–∞" class="form-input"><button class="btn-primary btn-block" onclick="createNewCase()"><i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å</button></div></div>
                    <div class="admin-section"><h4><i class="fas fa-tshirt"></i> –°–∫–∏–Ω—ã</h4><div id="admin-skins-list" class="admin-list"><div class="empty-state small"><i class="fas fa-tshirt"></i><p>–ù–µ—Ç —Å–∫–∏–Ω–æ–≤</p></div></div>
                    <div class="admin-form"><h5><i class="fas fa-plus-circle"></i> –ù–æ–≤—ã–π —Å–∫–∏–Ω</h5><input id="new-skin-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" class="form-input"><input id="new-skin-price" type="number" placeholder="–¶–µ–Ω–∞" value="100" class="form-input"><button class="btn-primary btn-block" onclick="createNewSkin()"><i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å</button></div></div></div>
                <div class="admin-column"><div class="admin-section"><h4><i class="fas fa-sliders-h"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–µ–π—Å–∞</h4><div id="selected-case-info" class="selected-case-info"><div class="empty-state small"><i class="fas fa-mouse-pointer"></i><p>–í—ã–±–µ—Ä–∏—Ç–µ –∫–µ–π—Å</p></div></div>
                    <div class="case-configuration"><h5><i class="fas fa-dice"></i> –°–∫–∏–Ω—ã (—à–∞–Ω—Å 1-100%)</h5>
                        <div id="case-drop-zone" class="drop-zone" ondrop="dropOnCase(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
                            <div id="case-skins-list" class="drop-zone-content"><i class="fas fa-arrow-left"></i><p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–∫–∏–Ω—ã</p><small>–£–∫–∞–∂–∏—Ç–µ —à–∞–Ω—Å –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏</small></div>
                        </div>
                        <div class="case-actions"><button class="btn-success btn-block" onclick="saveCaseSkins()"><i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button><button class="btn-secondary btn-block" onclick="clearCaseSkins()"><i class="fas fa-trash"></i> –û—á–∏—Å—Ç–∏—Ç—å</button></div>
                        <div class="admin-tip"><i class="fas fa-lightbulb"></i><p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–∫–∏–Ω—ã. –®–∞–Ω—Å 1-100. –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞.</p></div>
                    </div></div></div>
            </div>
        </div></div></div>
    </div>

    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="script.js"></script>
</body>
</html>